> ì‘ì„±ì: í”„ëŒ
> ì‘ì„± ì¼ì‹œ: 2024.05.31

### ë°©ì–´ì  ë³µì‚¬ë€?

ë³¸ê²©ì ìœ¼ë¡œ ë°©ì–´ì  ë³µì‚¬ê°€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ê¸° ì „ì— ê¸°ê°„ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” period í´ë˜ìŠ¤ë¥¼ ë´…ì‹œë‹¤.

í ğŸ¤”  ëª¨ë“  í•„ë“œê°€ final ì´ê³  ìƒì†ë„ class Level finalë¡œ ë§‰ì•„ì£¼ì—ˆìœ¼ë‹ˆ ë¶ˆë³€ ê°ì²´ê°€ ë§ì„ê¹Œìš”?

```java
public final class Period {
	private final Date start;
	private final Date end;

	public Period(Date start, Date end) {
		if(start.compareTo(end) > 0) {
			throw new IllegalArgumentException(start + "ê°€" + end + "ë³´ë‹¤ ëŠ¦ë‹¤.");
		}
		this.start = start;
		this.end = end;
	}

	public Date start() {
		return start;
	}

	public Date end() {
		return end;
	}
}

```

ì •ë‹µì€ ë¶ˆë³€ ê°ì²´ê°€ ì•„ë‹™ë‹ˆë‹¤.

ëˆˆì¹˜ê°€ ë¹ ë¥´ì‹œë‹¤ë©´ ì•„ì‹œê² ì§€ë§Œ, periodê°€ í•„ë“œë¡œ ê°€ì§€ëŠ” startì™€ endê°€ ê°€ë³€ ê°ì²´ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ì¦‰, start(), end()ë¡œ í•„ë“œë¥¼ ì™¸ë¶€ë¡œ ì—´ì–´ì£¼ê²Œ ëœë‹¤ë©´, ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì—ì„œ ììœ ìì œë¡œ í•„ë“œê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ì£ .


```java
Date start = new Date();
Date end = new Date();
Period p = new Period(start, end);
end.setYear(78); // pì˜ ë‚´ë¶€ë¥¼ ë³€ê²½!!!
```

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ì˜ˆë°©í•˜ê¸° ìœ„í•´ì„œ í•„ë“œë¡œ  ë¶ˆë³€ ê°ì²´ì¸ LocalDateTime, Instant, ZoneDateTime ë“±ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.
í•˜ì§€ë§Œ, Dateë¥¼ ì—¬ì „íˆ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë ˆê±°ì‹œë“¤ì´ ë§ìœ¼ë‹ˆ Dateì˜ ë¶ˆë³€ì„ ì–´ë–»ê²Œ ë³´ì¥í•  ìˆ˜ ìˆì„ ì§€ ê³ ë¯¼í•´ë´…ì‹œë‹¤.

### ëŒ€ì•ˆ1. ë§¤ê°œë³€ìˆ˜ë¥¼ ë°©ì–´ì  ë³µì‚¬í•˜ê¸°

ì•„ë˜ì™€ ê°™ì´ ìƒì„±ì ë§¤ê°œë³€ìˆ˜ë¥¼ ìƒˆë¡œìš´ Date ì¸ìŠ¤í„´ìŠ¤ë¡œ ë³µì‚¬í•˜ê²Œ ëœë‹¤ë©´, ë¬¸ì œê°€ í•´ê²°ë©ë‹ˆë‹¤. 
```java
public Period(Date start, Date end) {
	this.start = new Date(start.getTime());
	this.end = new Date(end.getTime());

	if(start.compareTo(end) > 0) {
			throw new IllegalArgumentException(start + "ê°€" + end + "ë³´ë‹¤ ëŠ¦ë‹¤.");
	}
}
```

ê·¸ëŸ°ë° 49ì¥ì—ì„œ ì•Œì•„ë³¸ `ë§¤ê°œ ë³€ìˆ˜ ìœ íš¨ì„± ê²€ì¦ë¥¼ ìµœëŒ€í•œ ë¹ ë¥´ê²Œ í•˜ë¼`ì™€ ëŒ€ì¹˜ëŒ€ëŠ” ì½”ë“œì£ ??

ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ëª¨ë‘ ì´ˆê¸°í™” í•œ í›„ ê²€ì¦í•˜ëŠ”ë° ì´ìœ ëŠ” ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì›ë³¸ ê°ì²´ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•œí›„ ë³µì‚¬ë³¸ì„ ë§Œë“œëŠ” ì°°ë‚˜ì— 
ì›ë³¸ì— ë³€í™”ê°€ ìƒê¸¸ ê°€ëŠ¥ì„±ì´ ìˆê¸° ë•Œë¬¸ì´ì£ . (ì´ë¥¼ TOCTOU ê³µê²©ì´ë¼ í•¨: time-of-check/time-of-use)

ë˜ ë‹¤ë¥¸ ê¶ê¸ˆì¦ìœ¼ë¡œ cloneìœ¼ë¡œ ë³µì‚¬í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì— ì£¼ëª©í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
cloneì€ í•´ë‹¹ ê°ì²´ì˜ í™•ì¥ ìƒì† í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ê³µê²©í• ìˆ˜ë„ ìˆë‹¤ê³  í•©ë‹ˆë‹¤. 


### ëŒ€ì•ˆ2. ë°˜í™˜ê°’ ë°©ì–´ì  ë³µì‚¬í•˜ê¸°

ìš°ë¦¬ëŠ” ëŒ€ì•ˆ1ì—ì„œ ì•Œì•„ë³¸ ê²ƒê³¼ ê°™ì´ ë§¤ê°œë³€ìˆ˜ë¥¼ ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œë„ ì•ˆì „í•˜ê²Œ ìƒì„±í•˜ê³  ë¶ˆë³€ì„±ê¹Œì§€ ë³´ì¥í•  ìˆ˜ ìˆëŠ” ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

ë‹¤ì‹œ ëŒì•„ ë´…ì‹œë‹¤. 

```java
public final class Period {
	private final Date start;
	private final Date end;

	public Period(Date start, Date end) {
	this.start = new Date(start.getTime());
	this.end = new Date(end.getTime());

	if(start.compareTo(end) > 0) {
			throw new IllegalArgumentException(start + "ê°€" + end + "ë³´ë‹¤ ëŠ¦ë‹¤.");
		}
	}

	public Date start() {
		return start;
	}

	public Date end() {
		return end;
	}
}

```

ëŒ€ì•ˆ 1ì„ í†µí•´ ë³€ê²½ëœ PeriodëŠ” ì™„ë²½í•˜ê²Œ ë¶ˆë³€ì´ ë³´ì¥ë ê¹Œìš”?

ë„¤~~ ì•„ë‹™ë‹ˆë‹¤. start()ì™€ end() ë©”ì„œë“œë¥¼ í†µí•´ ì—¬ì „íˆ ë‚´ë¶€ ê°€ë³€ ë©¤ë²„ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ì£ .. 

ë”°ë¼ì„œ 

ìµœì¢…ì ìœ¼ë¡œ ë‚´ë¶€ ê°’ì„ ë°˜í™˜í•˜ëŠ” start,end ë©”ì„œë“œì˜ ë°˜í™˜ê°’ ì—­ì‹œ ë°©ì–´ì  ë³µì‚¬ë¥¼ í•´ì¤ì‹œë‹¤.

```java
public final class Period {
	private final Date start;
	private final Date end;

	public Period(Date start, Date end) {
	this.start = new Date(start.getTime());
	this.end = new Date(end.getTime());

	if(start.compareTo(end) > 0) {
			throw new IllegalArgumentException(start + "ê°€" + end + "ë³´ë‹¤ ëŠ¦ë‹¤.");
		}
	}

	public Date start() {
		return new Date(start.getTime());
	}

	public Date end() {
		return new Date(end.getTime());
	}
}

```

---

### ê²°ë¡  

ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ì„œëŠ” ë°©ì–´ì  ë³µì‚¬ë¥¼ ê³ ë ¤í•´ë´…ì‹œë‹¤.
