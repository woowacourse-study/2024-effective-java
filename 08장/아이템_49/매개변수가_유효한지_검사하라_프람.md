# (ì•„ì´í…œ 49) ë§¤ê°œë³€ìˆ˜ê°€ ìœ íš¨í•œì§€ ê²€ì‚¬í•˜ë¼

> ì‘ì„±ì: í”„ëŒ
> ì‘ì„± ì¼ì‹œ: 5.31

### Fail Fast

>aÂ **fail-fast system**Â is one that immediately reports at its interface any condition that is likely to indicate a failure. Fail-fast systems are usually designed to stop normal operation rather than attempt to continue a possibly flawed process.

Fail fastëŠ” ì‹œìŠ¤í…œì— ê²°í•¨ì´ ìˆë‹¤ë©´, í”„ë¡œì„¸ìŠ¤ë¥¼ ê³„ì† ì§„í–‰í•˜ê¸° ë³´ë‹¤ëŠ” ì •ìƒì ì¸ ì‘ë™ì„ ì¤‘ë‹¨í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ìš°ë¦¬ëŠ” ì—¬ëŸ¬ ë¯¸ì…˜ì„ ì§„í–‰í•˜ë©´ì„œ ë„ë©”ì¸ ìƒìƒìì— ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ë“¤ì´ ë“¤ì–´ì˜¤ë©´ ê²€ì¦ì„ í†µí•´ 'NullPointerException', 'IllegalArgumentException' ê·¸ë¦¬ê³  'IllegalStateException' ë“±ì„ í†µí•´ 
ê°ì²´ì˜ ë¶ˆë³€ì‹ì„ ë³´ì¥í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. 

ë¡œë˜ ë¯¸ì…˜ì˜ ì˜ˆì‹œë¥¼ ë“¤ê² ìŠµë‹ˆë‹¤.
ë¡œë˜ ë²ˆí˜¸ëŠ” 1~45 ì‚¬ì´ì˜ ì„ì˜ì˜ ìˆ«ìë¥¼ ê°€ì§€ê²Œ ë˜ëŠ”ë°ìš”. 
ì´ì™€ ê°™ì´ ê°ì²´ê°€ ì •ìƒì ì¸ í–‰ìœ„ë¥¼ í•˜ê¸° ìœ„í•´ ì ˆëŒ€ë¡œ í—ˆë¬¼ì–´ì§€ì§€ ì•Šì•„ì•¼í•  ê°’ ë˜ëŠ” ì‹ì„ ë§í•©ë‹ˆë‹¤.
ì½”ë“œë¡œ ë³¼ê¹Œìš”?

```java
  
public class LottoNumber {  
    private int value;  
  
    public LottoNumber(int value) {  
        if (value < 1 || value > 45) {  
            throw new IllegalArgumentException("ì˜ëª»ëœ ë¡œë˜ ë²ˆí˜¸ì…ë‹ˆë‹¤.");  
        }  
        this.value = value;  
    }  
}
```

ìš°ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë¡œë˜ë²ˆí˜¸ì˜ ë¶ˆë³€ì‹ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ìƒì„±ìì— ê²€ì¦ ë¡œì§ì„ ì¶”ê°€í•´ì£¼ì—ˆì£ ?
ì´ë ‡ê²Œ ëœë‹¤ë©´ ìƒì„±ê³¼ì •ì—ì„œì˜ ë¶ˆë³€ì‹ì„ ë³´ì¥í•´ì£¼ì—ˆë‹¤í•©ë‹ˆë‹¤

 ì´ë ‡ê²Œ ë©”ì„œë“œ ë§¤ê°œë³€ìˆ˜ì˜ ë¶ˆë³€ì‹ì„ ì§€ì¼œì£¼ê²Œ ëœë‹¤ë©´ ì‹¤íŒ¨ ì›ìì„±(Failure atomic) ì—­ì‹œ ë³´ì¥í•  ìˆ˜ë„ ìˆê²Œë©ë‹ˆë‹¤.

### ê²€ì¦ ë°©ë²•1. Objects.requireNonNull

ë¹ ë¥¸ ì‹¤íŒ¨ë¥¼ ìœ„í•´ì„œ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìœ í‹¸ë¦¬í‹°ë¡œ java.util.Objects.requireNonNullì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
requireNonNullì´ ì–´ë–»ê²Œ ë¹ ë¥¸ ì‹¤íŒ¨ë¥¼ ë³´ì¥í•˜ëŠ” ì§€  ë‘ ì½”ë“œì˜ ì˜ˆì‹œë¡œ ë´…ì‹œë‹¤

```java
public class Lottos {  
    private final List<LottoNumber> lottoNumbers;  
  
    public Lottos(List<LottoNumber> lottoNumbers) {  
        validateDuplicateNumber(lottoNumbers);  
        this.lottoNumbers = lottoNumbers;  
    }  
  
    private void validateDuplicateNumber(List<LottoNumber> numbers // null) {
        foo();  
        bar();  
        if (new HashSet<>(numbers).size() == 7) {   ğŸ’£
            throw new IllegalArgumentException("ë¡œë˜ëŠ” 7ê°œì˜ ë¡œë˜ë„˜ë²„ë¡œ êµ¬ì„±ë˜ì–´ì•¼í•©ë‹ˆë‹¤.");  
        }  
    }
}
```

```java
public class Lottos {  
    private final List<LottoNumber> lottoNumbers;  
  
    public Lottos(List<LottoNumber> lottoNumbers) {  
        validateDuplicateNumber(lottoNumbers);  
        this.lottoNumbers = lottoNumbers;  
    }  
  
    private void validateDuplicateNumber(List<LottoNumber> numbers // null) {
        Object.requireNonNull(numbers); ğŸ’£
        foo();  
        bar();  
        if (new HashSet<>(numbers).size() != 7) {  
            throw new IllegalArgumentException("ë¡œë˜ëŠ” 7ê°œì˜ ë¡œë˜ë„˜ë²„ë¡œ êµ¬ì„±ë˜ì–´ì•¼í•©ë‹ˆë‹¤."); 
        }  
    }
}
```

ë‘ ì½”ë“œì— ğŸ’£ í‘œì‹œëœ ë¼ì¸ì´ nullpointerExceptionì´ ë°œìƒí•˜ëŠ” ì§€ì ì…ë‹ˆë‹¤. ëª…í™•í•˜ê²Œ ì‹¤íŒ¨ ì§€ì ì´ ë‹¤ë¥¸ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì£ .

ë‚´ë¶€ë¥¼ ë“¤ì—¬ë‹¤ ë³´ë©´ ê°ì²´ê°€ null ì¸ì§€ë¥¼ í™•ì¸í•˜ê³  nullPointerExceptionì„ ë”ì§€ëŠ” ê²Œ ëì…ë‹ˆë‹¤. 
í•˜ì§€ë§Œ, ì´ëŸ¬í•œ ë‹¨ìˆœí•œ ì½”ë“œë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì—ì„œ ìˆ˜ë™ìœ¼ë¡œ null ì²´í¬ë¥¼ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì´ì ì´ ìˆìŠµë‹ˆë‹¤.

```java
public static <T> T requireNonNull(T obj) {  
    if (obj == null)  
        throw new NullPointerException();  
    return obj;  
}
```

---

### ê²€ì¦ ë°©ë²•2. Assert


assert ë‹¨ì–¸ë¬¸ì€ jdk 1.4 ë¶€í„° ì§€ì›í•˜ëŠ” í‚¤ì›Œë“œë¡œ í•´ë‹¹ ì¡°ê±´ì€ ë¬´ì¡°ê±´ ì°¸ì´ë¼ëŠ” ê³¼ì •í•˜ì— ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.
ì´ìœ ëŠ” assertëŠ” ìµœì¢…ì‹¤íŒ¨ ì¦‰, jaríŒŒì¼ë¡œ íŒ¨í‚¤ì§•ì´ ë ë•Œ ë¹ ì§€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ë”°ë¼ì„œ  ë‹¨ì–¸ë¬¸ì˜ ì¡°ê±´ì´ falseì¼ë•Œ AssertionErrorë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.

Errorì˜ ê³µì‹ ë¬¸ì„œì˜ ëª…ì„¸ë¥¼ ì‚´í´ë´…ì‹œë‹¤.  
>since these errors are abnormal conditions that should never occur. That is,Â `Error`Â and its subclasses are regarded as unchecked exceptions for the purposes of compile-time checking of exceptions.

ê²°ë¡ ì€ ê²°ì½” ë°œìƒí•´ì„œëŠ” ì•ˆëœë‹¤ëŠ” ë‚´ìš©ì¸ë°ìš”. ë”°ë¼ì„œ public ë©”ì„œë“œê°€ ì•„ë‹Œ íŒ¨í‚¤ì§• ë ˆë²¨ì´ë‚˜, privateí•œ ê²½ìš°ì— í™•ì‹¤í•˜ê²Œ ê²€ì¦ê°’ì„ ë³´ì¥í•  ìˆ˜ ìˆì„ ë•Œë§Œ ì”ì‹œë‹¤ ğŸ˜Š 

```java
public class Lottos {  
    private final List<LottoNumber> lottoNumbers;  
  
    public Lottos(List<LottoNumber> lottoNumbers) {  
        validateDuplicateNumber(lottoNumbers);  
        this.lottoNumbers = lottoNumbers;  
    }  
  
    private void validateDuplicateNumber(List<LottoNumber> numbers) {  
        assert numbers != null;  
        assert numbers.size() == 7;  
    }  
  
    private void foo() {  
  
    }  
    private void bar() {  
  
    }
}
```

--- 

### ê²°ë¡  

ë§¤ê°œë³€ìˆ˜ëŠ” ìµœëŒ€í•œ ë¹ ë¥¸ ì‹œì ì—ì„œ ê²€ì¦ì„ í•´ì£¼ì. 
