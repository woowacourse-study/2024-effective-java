# ì•„ì´í…œ 19 : ìƒì†ì„ ê³ ë ¤í•´ ì„¤ê³„í•˜ê³  ë¬¸ì„œí™”í•˜ë¼. ê·¸ëŸ¬ì§€ ì•Šì•˜ë‹¤ë©´ ìƒì†ì„ ê¸ˆì§€í•˜ë¼
> ì•„ì´í…œ 18ì—ì„œëŠ” ìƒì†ì„ ì—¼ë‘ì— ë‘ì§€ ì•Šê³  ì„¤ê³„í–ˆê³  ìƒì†í•  ë•Œì˜ ì£¼ì˜ì ë„ ë¬¸ì„œí™”í•´ë†“ì§€ ì•Šì€ ì™¸ë¶€ í´ë˜ìŠ¤ë¥¼ ìƒì†í•  ë•Œì˜ ìœ„í—˜ì„ ê²½ê³ í–ˆë‹¤ ì—¬ê¸°ì„œ ì™¸ë¶€ë€ í”„ë¡œê·¸ë˜ë¨¸ì˜ í†µì œê¶Œ ë°–ì— ìˆì–´ì„œ ì–¸ì œ ì–´ë–»ê²Œ ë³€ê²½ë ì§€ ëª¨ë¥¸ë‹¤ëŠ” ëœ»ì´ë‹¤
> 

---

## ìƒì†ì„ ê³ ë ¤í•œ ì„¤ê³„ì™€ ë¬¸ì„œí™”

> ìƒì†ì„ ê³ ë ¤í•œ ì„¤ê³„ì™€ ë¬¸ì„œí™”ê°€ ì •í™•íˆ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ì
> 

### **ìƒì†ìš© í´ë˜ìŠ¤ëŠ” ì¬ì •ì˜ í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë“¤ì„ ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–»ê²Œ ì´ìš©í•˜ëŠ”ì§€(ìê¸° ì‚¬ìš©) ë¬¸ì„œë¡œ ë‚¨ê²¨ì•¼ í•œë‹¤**

- í´ë˜ìŠ¤ì˜ APIë¡œ ê³µê°œëœ ë©”ì„œë“œ(`ex: clear()`)ì—ì„œ í´ë˜ìŠ¤ ìì‹ ì˜ ë˜ ë‹¤ë¥¸ ë©”ì„œë“œ(`ex: removeRange()`)ë¥¼ í˜¸ì¶œí•  ìˆ˜ë„ìˆë‹¤. 
<br>ê·¸ëŸ°ë° ë§ˆì¹¨ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œê°€ ì¬ì •ì˜ ê°€ëŠ¥ ë©”ì„œë“œ(`ex: removeRange()`)ë¼ë©´ 
<br>ê·¸ ì‚¬ì‹¤ì„ í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ(`ex: clear()`)ì˜ API ì„¤ëª…ì— ì ì‹œí•´ì•¼ í•œë‹¤. 
<br>ë§ë¶™ì—¬ì„œ ì–´ë–¤ìˆœì„œë¡œ í˜¸ì¶œí•˜ëŠ”ì§€, ê°ê°ì˜ í˜¸ì¶œê²°ê³¼ê°€ ì´ì–´ì§€ëŠ” ì²˜ë¦¬ì— ì–´ë–¤ ì˜í–¥ì„ ì£¼ëŠ”ì§€ë„ ë‹´ì•„ì•¼í•œë‹¤.
    
    ```java
    public abstract class AbstractList<E> extends AbstractCollection<E> implements List<E> {
        /**
         * Removes all of the elements from this list (optional operation).
         * The list will be empty after this call returns.
         *
         * @implSpec
         * This implementation calls {@code removeRange(0, size())}.
         *
         * <p>Note that this implementation throws an
         * {@code UnsupportedOperationException} unless {@code remove(int
         * index)} or {@code removeRange(int fromIndex, int toIndex)} is
         * overridden.
         *
         * @throws UnsupportedOperationException if the {@code clear} operation
         *         is not supported by this list
         */
        public void clear() {
            removeRange(0, size());
        }
    
            /**
         * Removes from this list all of the elements whose index is between
         * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive.
         * Shifts any succeeding elements to the left (reduces their index).
         * This call shortens the list by {@code (toIndex - fromIndex)} elements.
         * (If {@code toIndex==fromIndex}, this operation has no effect.)
         *
         * <p>This method is called by the {@code clear} operation on this list
         * and its subLists.  Overriding this method to take advantage of
         * the internals of the list implementation can <i>substantially</i>
         * improve the performance of the {@code clear} operation on this list
         * and its subLists.
         *
         * @implSpec
         * This implementation gets a list iterator positioned before
         * {@code fromIndex}, and repeatedly calls {@code ListIterator.next}
         * followed by {@code ListIterator.remove} until the entire range has
         * been removed.  <b>Note: if {@code ListIterator.remove} requires linear
         * time, this implementation requires quadratic time.</b>
         *
         * @param fromIndex index of first element to be removed
         * @param toIndex index after last element to be removed
         */
        protected void removeRange(int fromIndex, int toIndex) {
            ListIterator<E> it = listIterator(fromIndex);
            for (int i=0, n=toIndex-fromIndex; i<n; i++) {
                it.next();
                it.remove();
            }
        }
    		// ì´ ë¦¬ìŠ¤íŠ¸ í˜¹ì€ ì´ ë¦¬ìŠ¤íŠ¸ì˜ ë¶€ë¶„ë¦¬ìŠ¤íŠ¸ì— ì •ì˜ëœ clear ì—°ì‚°ì´ ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤
    		// ë¦¬ìŠ¤íŠ¸ êµ¬í˜„ì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ í™œìš©í•˜ë„ë¡ ì´ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•˜ë©´ ì´ ë¦¬ìŠ¤íŠ¸ì™€ ë¶€ë¶„ë¦¬ìŠ¤íŠ¸ì˜
    		// clearì—°ì‚° ì„±ëŠ¥ì„ í¬ê²Œ ê°œì„ í•  ìˆ˜ ìˆë‹¤
        // ...
    }
    ```
    
- `implementation Requirements`: ë©”ì„œë“œ ë‚´ë¶€ ë™ì‘ ë°©ì‹ ì„¤ëª…
    - ë©”ì„œë“œ ì£¼ì„ì—Â `@implSpec`Â íƒœê·¸ë¥¼ ë¶™ì´ë©´ ìë°”ë… ë„êµ¬ê°€ ìƒì„±í•´ì¤Œ
    <br>(Java 8ì— ë„ì…ë˜ê³  Java 9ë¶€í„° ë³¸ê²©ì ìœ¼ë¡œ ì ìš©)

> **ì¢‹ì€ API ë¬¸ì„œ**
ë³¸ë˜ ì¢‹ì€ API ë¬¸ì„œë¼ë©´ `'ì–´ë–»ê²Œ'`ê°€ ì•„ë‹ˆë¼ `'ë¬´ì—‡'`ì„ ì„¤ëª…í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
<br>í•˜ì§€ë§Œ ìƒì†ì€ ìº¡ìŠí™”ë¥¼ ê¹¨ëœ¨ë¦¬ëŠ” ë°©ì‹ì´ë¼ ì–´ì©” ìˆ˜ ì—†ë‹¤. 
<br>ì•ˆì „í•˜ê²Œ ìƒì†í•˜ëŠ” ê²ƒì´ ìš°ì„ ì´ê¸°ì— ë‚´ë¶€ êµ¬í˜„ ë°©ì‹ì„ ì„¤ëª…í•´ì•¼ë§Œ í•œë‹¤.
<br>(ì•ˆì „í•˜ê²Œ ìƒì†í•˜ëŠ” ê²ƒì´ ìš°ì„ !)
> 

---

### ë¬¸ì„œë¡œ ë‚¨ê¸°ëŠ” ê²ƒ ë§ê³ ë„ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ ë™ì‘ ê³¼ì • ì¤‘ê°„ì— ë¼ì–´ë“¤ ìˆ˜ ìˆëŠ” `í›…`ì„ ì˜ ì„ ë³„í•˜ì—¬ `protected`ë©”ì„œë“œ í˜•íƒœë¡œ ê³µê°œí•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤

- `í›…Â (hook)`: : í´ë˜ìŠ¤ì˜ ë‚´ë¶€ ë™ì‘ ê³¼ì • ì¤‘ê°„ì— ë¼ì–´ë“¤ ìˆ˜ ìˆëŠ” ì½”ë“œ
- `clear()`
    - `removeRange()`ë¥¼ í˜¸ì¶œí•´ `index` ì²˜ìŒë¶€í„° ëê¹Œì§€ ì‚­ì œ
- `removeRange()`
    - `clear()`ë¥¼ ê³ ì„±ëŠ¥ìœ¼ë¡œ ë§Œë“¤ê¸° ì‰½ê²Œ í•˜ê¸° ìœ„í•´ ì œê³µ
    (`removeRange()` ë‚´ë¶€ `remove()` ê°€ ì„ í˜•ì‹œê°„ì´ ê±¸ë¦¬ë©´ ì´ êµ¬í˜„ì˜ ì„±ëŠ¥ì€ ì œê³±ì— ë¹„ë¡€í•œë‹¤)
    - í•´ë‹¹ ë©”ì„œë“œê°€ ì—†ì—ˆë‹¤ë©´ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ `clear` ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì„±ëŠ¥ì´ ëŠë ¤ì§€ê±°ë‚˜ ìƒˆë¡œ êµ¬í˜„í–ˆì–´ì•¼ í•œë‹¤.

### ìƒì†ìš© í´ë˜ìŠ¤ë¥¼ ì„¤ê³„í•  ë•Œ ì–´ë–¤ ë©”ì„œë“œë¥¼ protectedë¡œ ë…¸ì¶œí•´ì•¼ í• ê¹Œ?

- ë§ˆë²•ì€ ì—†ë‹¤ ì‹¬ì‚¬ìˆ™ê³  í•´ì„œ ì˜ ê²°ì •í•˜ì..
- `protected` ë©”ì„œë“œ í•˜ë‚˜í•˜ë‚˜ê°€ ë‚´ë¶€ êµ¬í˜„ì— í•´ë‹¹í•˜ë¯€ë¡œ ê·¸ ìˆ˜ëŠ” ê°€ëŠ¥í•œ ì ì–´ì•¼ í•œë‹¤
- **ìƒì†ìš© í´ë˜ìŠ¤ë¥¼ ì‹œí—˜í•˜ëŠ” ë°©ë²•ì€ ì§ì ‘ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë³´ëŠ”ê²ƒì´ ìœ ì¼í•˜ë‹¤**

> ê¼­ í•„ìš”í•œ `protected` ë©¤ë²„ í˜¹ì€ ë©”ì„œë“œë¥¼ ë†“ì³¤ë‹¤ë©´ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•  ë•Œ ê·¸ ë¹ˆìë¦¬ê°€ í™•ì—°íˆ ë“œëŸ¬ë‚œë‹¤.
> 
> 
> í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ì—¬ëŸ¬ê°œ ë§Œë“¤ ë•Œê¹Œì§€ ì „í˜€ ì“°ì´ì§€ ì•ŠëŠ” `protected`ë©¤ë²„ëŠ” ì‚¬ì‹¤ `private`ì´ì—ˆì–´ì•¼ í•  ê°€ëŠ¥ì„±ì´ í¬ë‹¤
> 

- **ìƒì†ìš©ìœ¼ë¡œ ì„¤ê³„í•œ í´ë˜ìŠ¤ëŠ” ë°°í¬ì „ì— ë°˜ë“œì‹œ í•˜ìœ„í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ê²€ì¦í•´ì•¼ í•œë‹¤.**

---

### **ìƒì†ìš© í´ë˜ìŠ¤ì˜ ìƒì„±ìì—ì„œ ì¬ì •ì˜ ê°€ëŠ¥í•œ ë©”ì„œë“œ í˜¸ì¶œ ê¸ˆì§€**

- ìƒìœ„ í´ë˜ìŠ¤ì˜ ìƒì„±ìëŠ” í•˜ìœ„ í´ë˜ìŠ¤ì˜ ìƒì„±ìë³´ë‹¤ ë¨¼ì € ì‹¤í–‰ëœë‹¤.
- ê²°ë¡ ì ìœ¼ë¡œ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ì¬ì •ì˜í•œ ë©”ì„œë“œê°€ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ìƒì„±ìë³´ë‹¤ ë¨¼ì € í˜¸ì¶œë˜ëŠ” ìƒí™©ì´ ë°œìƒë  ìˆ˜ ìˆë‹¤.

> **ì˜ˆ - Pieceì„ ìƒì†í•˜ëŠ” King**
> 

```java
class Piece {
    public Piece() {
        test();
    }

    public void test() {
        System.out.println("test");
    }
}

class King extends Piece {
    private final String string;

    public King() {
        string = "override";
    }

    @Override
    public void test() {
        System.out.println(string);
    }
}

// null
// override
```

ìœ„ì—ì„œ `King`ì˜ `test()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ê²°ê³¼ê°€ ë­ë¡œ ë‚˜ì˜¬ê¹Œ?

ì¼ë‹¨ ìƒìœ„ í´ë˜ìŠ¤ ìƒì„±ì ì„ ì–¸ ì‹œ `test()`ë¥¼ í˜¸ì¶œí•˜ë‹ˆ `System.out.println()`ì€ 2ë²ˆ í˜¸ì¶œë  ê²ƒì´ë‹¤.

stringì—Â `override`Â ê°’ì„ ë„£ì–´ì¤¬ìœ¼ë‹ˆ ì´ ê°’ì´ 2ë²ˆ ë‚˜ì˜¤ë¦¬ë¼ ìƒê°í–ˆì§€ë§Œ ê²°ê³¼ëŠ”Â `null`ê³¼Â `override`ì˜€ë‹¤.

**Kingì˜ ìƒì„±ìë³´ë‹¤ Kingì˜ test()ê°€ ë¨¼ì € í˜¸ì¶œë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.**

---

### Cloneableê³¼ Serializable ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¡°ì‹¬í•´ë¼?

ìœ„ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ìƒì† ê°€ëŠ¥í•˜ê²Œ ì„¤ê³„í•˜ëŠ” ê²ƒì€ ì¼ë°˜ì ìœ¼ë¡œ ì¢‹ì§€ ì•Šë‹¤.

`Cloneable`ì˜Â `clone()`ê³¼Â `Serializable`ì˜Â `readObject()`ëŠ” ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ”, ìƒì„±ìì™€ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ ê°€ì¡Œë‹¤.

**í´ë˜ìŠ¤ì˜ ìƒíƒœê°€ ì´ˆê¸°í™”ë˜ê¸° ì „ì— ë©”ì„œë“œë¶€í„° í˜¸ì¶œë˜ëŠ” ìƒí™©ì´ ì˜¬ ìˆ˜ ìˆë‹¤.**

`Serializable`ì„ êµ¬í˜„í•œ ìƒì†ìš© í´ë˜ìŠ¤ê°€Â `readResolve()`,Â `writeReplace()`Â ë©”ì„œë“œë¥¼ ê°€ì§ˆ ë•Œ `protected`ë¡œ ì„ ì–¸í•´ì•¼ í•œë‹¤.
(privateìœ¼ë¡œ ì„ ì–¸ ì‹œ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œëŠ” ë¬´ì‹œë˜ë¯€ë¡œ)

---

### ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ìƒì†ìš©ìœ¼ë¡œ ì„¤ê³„í•˜ì§€ ì•Šì€ í´ë˜ìŠ¤ëŠ” ìƒì†ì„ ê¸ˆì§€í•˜ëŠ” ê²ƒì´ë‹¤.

<aside>

ğŸ“Œ **ìƒì†ì„ ê¸ˆì§€í•˜ëŠ” ë°©ë²•**

</aside>

1. **í´ë˜ìŠ¤ë¥¼ finalë¡œ ì„ ì–¸**
2. **ëª¨ë“  ìƒì„±ìë¥¼ privateë‚˜ defaultë¡œ ì„ ì–¸ ë’¤ public ì •ì  íŒ©í† ë¦¬ ìƒì„±**

êµ¬ì²´ í´ë˜ìŠ¤ê°€ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•˜ëŠ”ë° ìƒì†ì„ ê¸ˆì§€í•˜ëŠ”ê±´ ì‚¬ìš©ì´ ë¶ˆí¸í•´ì§ˆ ìˆ˜ ìˆë‹¤.

ì´ëŸ° í´ë˜ìŠ¤ë¼ë„ ìƒì†ì„ ê¼­ í—ˆìš©í•´ì•¼ê² ë‹¤ë©´ 

í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ì¬ì •ì˜ ê°€ëŠ¥ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ìê¸°ì‚¬ìš© ì½”ë“œë¥¼ ì™„ë²½í•˜ê²Œ ì œê±°í•˜ê³  ì´ë¥¼ ë¬¸ì„œí™”í•˜ë©´ ëœë‹¤.

**ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•´ë„ ë‹¤ë¥¸ ë©”ì„œë“œì˜ ë™ì‘ì— ì•„ë¬´ëŸ° ì˜í–¥ì„ ì£¼ì§€ ì•Šê²Œë” ê°œë°œí•˜ë©´ ëœë‹¤.**

---

<aside>

ğŸ“Œ **ìƒì†ì—ì„œ ë„ìš°ë¯¸ ë©”ì„œë“œ í™œìš©í•˜ê¸°**

</aside>

í´ë˜ìŠ¤ ë™ì‘ì„ ìœ ì§€í•˜ë©° ì¬ì •ì˜ ê°€ëŠ¥ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë¥¼ ì œê±°í•˜ê³  ì‹¶ë‹¤ë©´?

ì¬ì •ì˜ ê°€ëŠ¥ ë©”ì„œë“œë¥¼ `private` í˜•ì‹ì˜ ë„ìš°ë¯¸ ë©”ì„œë“œë¡œ ì˜®ê²¨ë³´ì.

> **ì˜ˆ - Pieceë¥¼ ìƒì†í•˜ëŠ” King ë³€í˜•**
> 

```java
class Piece {
    public Piece() {
        helper();
    }

    public void test() {
        helper();
    }

    private void helper() {
        System.out.println("test");
    }
}

class King extends Piece {
    private final String string;

    public King() {
        string = "override";
    }

    @Override
    public void test() {
        System.out.println(string);
    }
}
// test
// override
```

---

## ê²°ë¡ 

- ìƒì†ìš© í´ë˜ìŠ¤ë¥¼ ì„¤ê³„í•˜ëŠ” ê²ƒì€ ë§Œë§Œì¹˜ ì•Šë‹¤
- í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ìŠ¤ìŠ¤ë¡œë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ëª¨ë‘ ë¬¸ì„œë¡œ ë‚¨ê²¨ì•¼ í•œë‹¤
- ë‹¤ë¥¸ ì´ê°€ íš¨ìœ¨ ì¢‹ì€ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ì¼ë¶€ ë©”ì„œë“œë¥¼ `protected`ë¡œ ì œê³µí•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤.

<aside>

ğŸ“Œ **í´ë˜ìŠ¤ë¥¼ í™•ì¥í•´ì•¼ í•  ëª…í™•í•œ ì´ìœ ê°€ ë– ì˜¤ë¥´ì§€ ì•Šìœ¼ë©´ ìƒì†ì„ ê¸ˆì§€í•˜ëŠ” í¸ì´ ë‚«ë‹¤**

</aside>