# 메서드 참조

- 실행하려는 메소드를 참조해서 매개 변수의 정보 및 리턴 타입을 알아내어, 람다식에서 굳이 선언이 불필요한 부분을 생략하는 것이다.
- 다음 코드는 임의의 키와 Integer 값의 매핑을 관리하는 프로그램의 일부다.

```java
map.merge(key, 1,(count, incr) ->count +incr);
```

- 이 코드는 주어진 key가 맵 안에 없다면 key값과 1을 map에 저장한다.
- key가 맵 안에 이미 있다면 기존의 매핑된 값과 주어진 1을 더한 값으로 매핑값을 변경한다.

## 메서드 참조를 활용하여 변경

- 위 코드는 Integer 클래스가 제공하는 정적 메서드 sum의 참조를 전달하여 다음과 같이 변경할 수 있다.

```java
map.merge(key, 1,Integer::sum);
```

## 람다 사용시 주의사항

- 어떤 람다에서는 매개변수의 이름 자체가 좋은 가이드가 되기도 한다.
    - 이런 람다는 길이는 더 길지만 메서드 참조보다 읽기 쉽고 유지보수도 쉬울 수 있다.
- 람다로 할 수 없는 일은 메서드 참조로도 할 수 없다.
    - 람다로 우선 작성하고, 메서드 참조로 변경해주면 좋다.
- IDE는 메서드 참조를 권하지만 항상 좋지는 않다.
    - 때로는 람다가 메서드 참조보다 간결할 때가 있는데, 주로 메서드와 람다가 같은 클래스에 있을 때 그렇다.
    - 예를 들어 다음 코드가 `GoshThisClassNameIsHumongous` 클래스 안에 있다고 할 때 람다로 교체하면 다음과 같다.
        - 교체 전 : `service.excute(GoshThisClassNameIsHumongous::action)`
        - 교체 후 : `service.excute(() -> action())`
    - `java.util.function` 패키지가 제공하는 제네릭 정적 팩터리 메소드 `Function.identity()`도 `(x -> x)`로 사용하는 것이 훨씬 짧고 명확하다.

# 메서드 참조의 유형

| 메서드 참조 유형  | 예                     | 같은 기능을 하는 람다                    |
|:-----------|:----------------------|:--------------------------------|
| 정적         | `Integer::parseInt`   | `str -> Integer.parseInt(str)`   |
| 한정적(인스턴스)  | `name::getValue`      | `() -> name.getValue()`         |
| 비한정적(인스턴스) | `String::toUpperCase` | `(String s) -> s.toUpperCase()` | 
| 클래스 생성자    | `TreeMap<K,V>::new`   | `() -> new TreeMap<K, V>()`     |
| 배열 생성자     | `int[]::new`          | `len -> new int[len]`           |

## 한정적 인스턴스 메서드 참조와 비한정적 인스턴스 메서드 참조
- 메서드 참조를 하는 시점에 메서드를 참조할 외부 인스턴스가 존재하고 있느냐 아니냐로 나눌 수 있다.
- 쉽게 말해, 한정적 인스턴스 메서드 참조는 이미 존재하는 인스턴스의 메서드를 참조하는 것이다.
- 비한정적 인스턴스 메서드는 스트림에서 주로 사용한다.
  - 스트림에서 돌아가는 요소의 타입은 알지만 인스턴스의 값은 알지 못한다.
  - 즉, 어떤 인스턴스가 와도 무방하다는 얘기이므로 비한정적 메서드 참조가 사용된다.

# 결론
- 메서드 참조 쪽이 짧고 명확하다면 메서드 참조를 쓰고, 아닐 때만 람다를 쓰자.